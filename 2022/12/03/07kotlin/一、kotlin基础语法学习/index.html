<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="一、kotlin基础语法学习"><meta name="keywords" content="异常,包,函数,表达式,表达式函数体,可变函数参数,lambda,匿名函数,函数内敛,函数引用,高阶函数,闭包,变量,字符串模板,类,属性,import,枚举类,when表达式,智能类型转换,隐式转换,for循环,范围表达式,遍历,步长,倒叙,半开区间,in,取反,迭代,map"><meta name="author" content="Bangiao"><meta name="copyright" content="Bangiao"><title>一、kotlin基础语法学习 | Bangiao's Notebooks</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '6.3.0'
} </script><meta name="generator" content="Hexo 6.3.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#kotlin%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.</span> <span class="toc-text">kotlin基础语法学习</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#kotlin-%E5%8C%85"><span class="toc-number">1.1.</span> <span class="toc-text">kotlin 包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E%E5%92%8C%E5%AE%9A%E4%B9%89"><span class="toc-number">1.2.</span> <span class="toc-text">函数声明和定义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.2.1.</span> <span class="toc-text">什么是表达式?</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%AF%94%E8%AF%AD%E5%8F%A5%E6%9B%B4%E5%8A%A0%E5%AE%89%E5%85%A8"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">表达式比语句更加安全</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%87%BD%E6%95%B0%E4%BD%93"><span class="toc-number">1.2.2.</span> <span class="toc-text">什么是表达式函数体?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E5%8F%98%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-number">1.2.3.</span> <span class="toc-text">可变函数参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#kotlin%E5%87%BD%E6%95%B0%E5%80%BC%E5%AF%B9%E8%B1%A1%E5%8F%82%E6%95%B0%E4%B8%8D%E5%8F%AF%E5%8F%98"><span class="toc-number">1.2.4.</span> <span class="toc-text">kotlin函数值对象参数不可变</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lambda%E5%92%8C%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.5.</span> <span class="toc-text">lambda和匿名函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">匿名函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">lambda表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%86%85%E8%81%94"><span class="toc-number">1.2.5.3.</span> <span class="toc-text">函数内联</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%BC%95%E7%94%A8"><span class="toc-number">1.2.6.</span> <span class="toc-text">函数引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">1.2.7.</span> <span class="toc-text">函数类型作为返回值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AD%E5%8C%85"><span class="toc-number">1.2.8.</span> <span class="toc-text">闭包</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-number">1.3.</span> <span class="toc-text">变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%92%8C-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.4.</span> <span class="toc-text">&#x3D;&#x3D; 和 &#x3D;&#x3D;&#x3D;的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%A8%A1%E6%9D%BF"><span class="toc-number">1.5.</span> <span class="toc-text">字符串格式化模板</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%92%8C%E5%B1%9E%E6%80%A7"><span class="toc-number">1.6.</span> <span class="toc-text">类和属性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB"><span class="toc-number">1.6.1.</span> <span class="toc-text">类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7"><span class="toc-number">1.6.2.</span> <span class="toc-text">属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#kotlin%E4%B8%AD%E7%9A%84import%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">1.7.</span> <span class="toc-text">kotlin中的import关键字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E7%B1%BB"><span class="toc-number">1.8.</span> <span class="toc-text">枚举类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#when-%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.9.</span> <span class="toc-text">when 表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%99%BA%E8%83%BD%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E5%92%8Cis%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%B1%BB%E5%9E%8B%E9%9A%90%E5%BC%8F%E8%BD%AC%E6%8D%A2"><span class="toc-number">1.10.</span> <span class="toc-text">智能类型转换和is表达式类型隐式转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-is-%E6%99%BA%E8%83%BD%E8%BD%AC%E6%8D%A2%E7%B1%BB%E5%9E%8B%E6%9C%89%E5%89%8D%E6%8F%90"><span class="toc-number">1.10.1.</span> <span class="toc-text">使用 is 智能转换类型有前提</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-as-%E5%BC%BA%E5%88%B6%E8%BD%AC%E6%8D%A2%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.11.</span> <span class="toc-text">使用 as 强制转换类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#for%E5%BE%AA%E7%8E%AF%E5%92%8C%E8%8C%83%E5%9B%B4%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.12.</span> <span class="toc-text">for循环和范围表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8C%83%E5%9B%B4%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.12.1.</span> <span class="toc-text">范围表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%81%8D%E5%8E%86"><span class="toc-number">1.12.1.1.</span> <span class="toc-text">遍历</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A5%E9%95%BF"><span class="toc-number">1.12.1.2.</span> <span class="toc-text">步长</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%80%92%E5%BA%8F"><span class="toc-number">1.12.1.3.</span> <span class="toc-text">倒序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8A%E5%BC%80%E5%8C%BA%E9%97%B4"><span class="toc-number">1.12.1.4.</span> <span class="toc-text">半开区间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#in-%E6%A3%80%E6%9F%A5%E6%88%90%E5%91%98%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8"><span class="toc-number">1.12.1.5.</span> <span class="toc-text">in 检查成员是否存在</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#in-%E6%A3%80%E6%9F%A5%E6%88%90%E5%91%98%E9%85%8D%E5%90%88%E6%84%9F%E5%8F%B9%E5%8F%B7-%E5%8F%96%E5%8F%8D%E7%BB%93%E6%9E%9C"><span class="toc-number">1.12.1.6.</span> <span class="toc-text">in 检查成员配合感叹号: 取反结果</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#for-%E4%BD%BF%E7%94%A8%E8%BF%AD%E4%BB%A3%E5%99%A8%E9%81%8D%E5%8E%86"><span class="toc-number">1.12.1.7.</span> <span class="toc-text">for 使用迭代器遍历</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#withIndex%E9%94%AE%E5%80%BC%E7%BB%84%E9%81%8D%E5%8E%86"><span class="toc-number">1.12.1.8.</span> <span class="toc-text">withIndex键值组遍历</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3map"><span class="toc-number">1.12.1.9.</span> <span class="toc-text">迭代map</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#kotlin-%E5%BC%82%E5%B8%B8"><span class="toc-number">1.13.</span> <span class="toc-text">kotlin 异常</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://imgsa.baidu.com/forum/pic/item/c8179682d158ccbf63dc944d1bd8bc3eb03541a9.jpg"></div><div class="author-info__name text-center">Bangiao</div><div class="author-info__description text-center"></div><div class="follow-button"><a target="_blank" rel="noopener" href="https://github.com/bangiao">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">60</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">609</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">7</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">我的博客</div><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://juejin.cn/user/4248168662314823">掘金</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://blog.csdn.net/qq_30690165">CSDN</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://www.cnblogs.com/bangiao/">博客园</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://gitee.com/bangiao_admin/projects">Gitee笔记源码</a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Bangiao's Notebooks</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">首页</a><a class="site-page" href="/archives">文章列表</a><a class="site-page" href="/tags">文章标签</a><a class="site-page" href="/categories">文章分类</a><a class="site-page" href="/sources">笔记源码</a><a class="site-page" href="/about">关于</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> Search</span></a></span></div><div id="post-info"><div id="post-title">一、kotlin基础语法学习</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2022-12-03</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/kotlin/">kotlin</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="kotlin基础语法学习"><a href="#kotlin基础语法学习" class="headerlink" title="kotlin基础语法学习"></a>kotlin基础语法学习</h1><blockquote>
<p>简单的入个门, 复杂的操作放在下一章节</p>
</blockquote>
<h2 id="kotlin-包"><a href="#kotlin-包" class="headerlink" title="kotlin 包"></a>kotlin 包</h2><ul>
<li>和java包不同, java类必须放在对应包名的目录下, 而kotlin没有强制要求</li>
<li>kotlin的类名可以和文件名不同</li>
<li>kotlin甚至可以不用写类</li>
</ul>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6fc62ed05b4a405a819c10634de627aa~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> base</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">funcMax</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">   <span class="keyword">return</span>  <span class="keyword">if</span>(a &gt; b) a <span class="keyword">else</span> b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> a = <span class="number">10</span></span><br><span class="line">   <span class="keyword">var</span> b = <span class="number">20</span></span><br><span class="line">   println(funcMax(a, b))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>java源码如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">FuncDemo01Kt</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">funcMax</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> a &gt; b ? a : b;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(<span class="meta">@NotNull</span> String[] args)</span> &#123;</span><br><span class="line">      <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">      <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line">      <span class="type">int</span> <span class="variable">var3</span> <span class="operator">=</span> funcMax(a, b);</span><br><span class="line">      System.out.println(var3);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>kotlin编译器将文件<code>FuncDemo01</code>加上 <code>Kt</code> 做成了 java 的类名, 而<code>max</code> 是<code>FuncDemo01Kt</code>类的静态方法, 在 kotlin 中被称之为 <code>顶层函数</code></p>
<p>java调用kotlin<code>顶层函数</code>只需要如此:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FuncDemo01Kt.funcMax(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>下面是java调用kotlin顶层函数的方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> base.java;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> base.FuncDemo01Kt; <span class="comment">// ★</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavaTestDemo01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line">        System.out.println(FuncDemo01Kt.funcMax(a, b)); <span class="comment">// ★</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="函数声明和定义"><a href="#函数声明和定义" class="headerlink" title="函数声明和定义"></a>函数声明和定义</h2><p>kotlin使用 fun 关键字定义函数: </p>
<p>普通函数体形式:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sum</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span>:<span class="built_in">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>fun关键字 + 空格 + 函数名字(参数名: 参数类型, ...): 函数返回值 &#123;函数体&#125;</code></p>
<p>kotlin中还有表达式函数体形式, 如下:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sum</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span> = a + b</span><br></pre></td></tr></table></figure>

<p><code>fun关键字 + 空格 + 函数名字(参数名: 参数类型, ...) 表达式函数体( = a + b)</code></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// kotlin函数无返回值时使用 `Unit` 关键字, 注意这里和`Uint`做区分, 表示`unsigned int`无符号</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sum</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span>:<span class="built_in">Unit</span> &#123;</span><br><span class="line">    <span class="comment">// 字符串模板操作关键字 `$`</span></span><br><span class="line">    println(<span class="string">&quot;max = <span class="subst">$&#123;if(a &gt; b) a else b&#125;</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="什么是表达式"><a href="#什么是表达式" class="headerlink" title="什么是表达式?"></a>什么是表达式?</h3><p><strong><code>表达式是有返回值的语句</code></strong></p>
<p><code>1</code>, <code>-1</code>, <code>1 + 1</code>, <code>listOf(1, 2, 3)</code> 这些都是表达式</p>
<p>还有</p>
<p><code>&#123;x:Int -&gt; x + 1&#125;</code>  <code>fun(x: Int) &#123; println(x) &#125;</code> <code>if(x &gt; 1) x else 1</code> 这三个也是表达式</p>
<h4 id="表达式比语句更加安全"><a href="#表达式比语句更加安全" class="headerlink" title="表达式比语句更加安全"></a>表达式比语句更加安全</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">isStatement</span><span class="params">(Boolean flag)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">a</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">        a = <span class="string">&quot;dive into kotlin&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(a.toUpperCase());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>这里存在一个问题. 变量 <code>a</code> 为 <code>null</code>, 如果不经过 <code>if</code> 语句, 则会在下面变成 <code>null.toUpperCase()</code> 直接报错</p>
<p>如果我们使用 kotlin 的方式重新实现这种方式</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">isStatement</span><span class="params">(flag: <span class="type">Boolean</span>)</span></span>: <span class="built_in">Unit</span> &#123;</span><br><span class="line">   <span class="comment">// 我们会主动接收 if 的返回值</span></span><br><span class="line">   <span class="keyword">val</span> a = <span class="keyword">if</span> (flag) <span class="string">&quot;dive into kotlin&quot;</span> <span class="keyword">else</span> <span class="string">&quot;&quot;</span></span><br><span class="line">   println(a.uppercase())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>如果我们不写上 <code>else</code> , idea会报错</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/868486cfe76641608aed938012e3201e~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<blockquote>
<p>表达式的目的是为了创建新值</p>
</blockquote>
<h3 id="什么是表达式函数体"><a href="#什么是表达式函数体" class="headerlink" title="什么是表达式函数体?"></a>什么是表达式函数体?</h3><p>如果一个函数的整个函数体都是<code>一个表达式</code>时, 我们就可以称之为<code>表达式函数体</code></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">max</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span> = <span class="keyword">if</span> (a &gt; b) a <span class="keyword">else</span> b</span><br></pre></td></tr></table></figure>

<blockquote>
<p>表达式函数体中, 可以省略 <code>return</code> 关键字, 加上 等号 和表达式 <code>if (a &gt; b) a else b</code>, 这意味着该函数返回了 <code>if 表达式</code> 的 结果</p>
</blockquote>
<h3 id="可变函数参数"><a href="#可变函数参数" class="headerlink" title="可变函数参数"></a>可变函数参数</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">printArray</span><span class="params">(<span class="keyword">vararg</span> arr: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span>(v <span class="keyword">in</span> arr) &#123;</span><br><span class="line">        println(v)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>需要注意这种用法:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">val</span> list = listOf&lt;<span class="built_in">Int</span>&gt;(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">   printArray(*list.toIntArray())</span><br><span class="line">   <span class="comment">//         👆</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="kotlin函数值对象参数不可变"><a href="#kotlin函数值对象参数不可变" class="headerlink" title="kotlin函数值对象参数不可变"></a>kotlin函数值对象参数不可变</h3><p>kotlin值对象参数默认为 val 修饰(表面上这么认为就行)</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5380053d3f554011b277813c9a715aca~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><code>Val cannot be reassigned</code></p>
<p>如果你按住 <code>ctrl</code> 将鼠标放在参数 <code>a</code> 上面将会看到 <code>value-parameter a: Int</code> 字样</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b5dacd54d1ab40fc8260f029f6aa77ec~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p>放在变量 <code>b</code> 处, 将会看到 <code>val b: Int</code></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/598c9a72f3ea4f3e8fd3ca04cfa53e7d~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p>这是kotlin值参数类型</p>
<p>kotlin所有函数的参数都是<code>值参数</code>, 都是不可修改的</p>
<p>但其不影响<code>值参数</code>当作<code>引用地址</code>修改在堆中对象的情况</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4976cb46e4774bd991252ddb158fb61b~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<blockquote>
<p>了解值参数这一概念没啥用, 所以当作 <code>val 变量</code>就行了</p>
</blockquote>
<p>如果将值再次赋值给 <code>val 变量</code>: </p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e75b3ddb6ec14d77a3ee45f3e68a754d~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p>在java中将体现为:</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8777dd9461d840fdb893e2d8bec62d93~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<h3 id="lambda和匿名函数"><a href="#lambda和匿名函数" class="headerlink" title="lambda和匿名函数"></a>lambda和匿名函数</h3><h4 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h4><p>具名函数如下:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">max</span><span class="params">(x: <span class="type">Int</span>, y: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>匿名函数需要将函数名去除</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">fun</span> <span class="params">(x: <span class="type">Int</span>, y: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这种形式需要变量接收, 否则将报错</p>
<p>所以添加一个变量来代表匿名函数: </p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 下面的 f 就是函数类型变量</span></span><br><span class="line"><span class="keyword">val</span> f1 = <span class="function"><span class="title">fun</span> <span class="params">(x: <span class="type">Int</span>, y: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 然后使用 f 变量调用匿名函数</span></span><br><span class="line"><span class="keyword">val</span> sum = f1(<span class="number">190</span>, <span class="number">29</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>前面的 <code>fun</code> 不能省略, 否则会出错.</p>
</blockquote>
<p>可以使用 lambda 表达式代替匿名函数</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> f2 = &#123;x: <span class="built_in">Int</span>, y: <span class="built_in">Int</span> -&gt; x + y&#125;</span><br></pre></td></tr></table></figure>


<p>还可以这样用:</p>
<blockquote>
<p>比较超前, 不过学过 java 的应该看得懂点</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">running</span><span class="params">(x: <span class="type">Int</span>, y: <span class="type">Int</span>, funType: (<span class="type">Int</span>, <span class="type">Int</span>) -&gt; <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> funcType(x, y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用方法</span></span><br><span class="line">running(<span class="number">10</span>, <span class="number">299</span>, <span class="function"><span class="title">fun</span> <span class="params">(x, y)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> x + y</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// lambda表达式</span></span><br><span class="line">running(<span class="number">10</span>, <span class="number">299</span>, &#123; x, y -&gt; x + y &#125;)</span><br></pre></td></tr></table></figure>

<p>如果在 lambda 中写上多段代码可以这样:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">running(<span class="number">10</span>, <span class="number">299</span>) &#123; x, y -&gt;</span><br><span class="line">   <span class="keyword">val</span> ret = x + y</span><br><span class="line">   println(<span class="string">&quot;ret = <span class="variable">$ret</span>&quot;</span>)</span><br><span class="line">   ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>匿名函数是对象, 通过函数类型 new 出来的对象, 而函数类型仅仅是个类型, 类似于 <code>Int Double Float String Byte Long</code>等等</strong></p>
</blockquote>
<h4 id="lambda表达式"><a href="#lambda表达式" class="headerlink" title="lambda表达式"></a>lambda表达式</h4><p>在kotlin中凡是同时被 <code>&#123;&#125;</code> 包裹的使用 <code>-&gt;</code> 分割参数和函数体的表达式都可以称之为 <code>lambda 表达式</code>, 例如: <code>&#123; x, y -&gt; x + y &#125;</code></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lambda 表达式</span></span><br><span class="line"><span class="keyword">val</span> x1 = &#123; x: <span class="built_in">Int</span>, y: <span class="built_in">Int</span> -&gt; <span class="keyword">if</span> (x &gt; y) x <span class="keyword">else</span> y &#125;</span><br><span class="line"><span class="keyword">val</span> x2: (<span class="built_in">Int</span>, <span class="built_in">Int</span>) -&gt; <span class="built_in">Int</span> = &#123; x, y -&gt; <span class="keyword">if</span> (x &gt; y) x <span class="keyword">else</span> y &#125;</span><br><span class="line"><span class="comment">// 匿名函数方式</span></span><br><span class="line"><span class="keyword">val</span> y1 = <span class="function"><span class="title">fun</span><span class="params">(x: <span class="type">Int</span>, y: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">if</span> (x &gt; y) x <span class="keyword">else</span> y</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">val</span> y2: (<span class="built_in">Int</span>, <span class="built_in">Int</span>) -&gt; <span class="built_in">Int</span> = <span class="function"><span class="title">fun</span><span class="params">(x: <span class="type">Int</span>, y: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">if</span> (x &gt; y) x <span class="keyword">else</span> y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>(Int, Int) -&gt; Int</code> 是函数类型, <code>他不是对象, 他是一个类型</code></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fd45f216ef06492e9ce6904ffd5d9491~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<blockquote>
<p><code>var f = (Int, Int) -&gt; Int</code> 错误, 类型无法赋值</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// kotlin 的初始化, 使用 lambda表达式初始化 f 类型</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> f: <span class="params">(<span class="built_in">Int</span>, <span class="built_in">Int</span>)</span></span> -&gt; <span class="built_in">Int</span> = &#123; x, y -&gt; x + y &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在学习的过程中, 我发现 <code>fun sum1(x: Int, y: Int) = &#123;x, y -&gt; x + y&#125;</code>会报错</p>
</blockquote>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d617d8f92dc4c3fb40a76ad1367fe81~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<blockquote>
<p>报错是 “<strong>无法推断此参数的类型。 请明确指定。</strong>“, 初学者不熟悉 kotlin 语法, 在这里会看的比较懵逼</p>
</blockquote>
<blockquote>
<p>其本质问题是: <code>&#123;x, y -&gt; x + y &#125;</code> 是一个对象, 而函数返回值却是 <code>Int</code>, 返回值类型不匹配</p>
</blockquote>
<p>代码最终返回值类型是 <code>(???, ???) -&gt; Int</code>, <code>???</code> 表示不清楚是什么类型? <code>&#123;x, y -&gt; x + y &#125;</code> 根本就没给出 x 和 y 的类型是什么…</p>
<p>如果不理解, 可以把 <code>=</code> 修改成  <code>return</code> </p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里报错, 返回值类型是: (???, ???) -&gt; Int</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sum0</span><span class="params">(x: <span class="type">Int</span>, y: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;x, y -&gt; x + y&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>idea智能提示应该修改成:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 现在改成这样: (Int, Int) -&gt; Int, 这样就不会报错了</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sum1</span><span class="params">(x: <span class="type">Int</span>, y: <span class="type">Int</span>)</span></span>: (<span class="built_in">Int</span>, <span class="built_in">Int</span>) -&gt; <span class="built_in">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;x, y -&gt; x + y&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>是否更加容易理解了呢?</p>
<p>我们还可以像下面这种方式给 lambda 对象的参数添加类型:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sum</span><span class="params">(x: <span class="type">Int</span>, y: <span class="type">Int</span>)</span></span> = &#123;a: <span class="built_in">Int</span>, b: <span class="built_in">Int</span> -&gt; </span><br><span class="line">   println(<span class="string">&quot;a = <span class="variable">$a</span>, b = <span class="variable">$b</span>, x = <span class="variable">$x</span>, y = <span class="variable">$y</span>&quot;</span>) <span class="comment">// a = 10, b = 20, x = 1, y = 2</span></span><br><span class="line">   x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改后, 我们可以这样调用:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sum(<span class="number">1</span>, <span class="number">2</span>)(<span class="number">10</span>, <span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>解析: <code>sum(1, 2)</code> 返回一个 lambda 对象, 类型是<code>(Int, Int) -&gt; Int</code>, 还可以调用lambda函数 传递参数 10 和 20: <code>lambda函数(10, 20)</code></p>
</blockquote>
<h4 id="函数内联"><a href="#函数内联" class="headerlink" title="函数内联"></a>函数内联</h4><ul>
<li>什么是函数内联?</li>
</ul>
<p>我们学习过C语言的人应该都知道 宏定义 吧?</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MAX xxx</span></span><br></pre></td></tr></table></figure>

<p>他的本质功能是代码替换, 而 kotlin 函数内联就类似于这样</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">inline</span> <span class="function"><span class="keyword">fun</span> <span class="title">running</span><span class="params">(x: <span class="type">Any</span>, funType: (<span class="type">Any</span>) -&gt; <span class="type">String</span>)</span></span> = funType(x)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> number: <span class="built_in">Double</span> = <span class="number">1.13121356456</span></span><br><span class="line">    running(number) &#123;</span><br><span class="line">        <span class="keyword">when</span> (it) &#123;</span><br><span class="line">            <span class="keyword">is</span> <span class="built_in">Byte</span> -&gt; <span class="built_in">Byte</span>::<span class="keyword">class</span>.java.name</span><br><span class="line">            <span class="keyword">is</span> <span class="built_in">Char</span> -&gt; <span class="built_in">Char</span>::<span class="keyword">class</span>.java.name</span><br><span class="line">            <span class="keyword">is</span> <span class="built_in">Boolean</span> -&gt; <span class="built_in">Boolean</span>::<span class="keyword">class</span>.java.name</span><br><span class="line">            <span class="keyword">is</span> <span class="built_in">Int</span> -&gt; <span class="built_in">Int</span>::<span class="keyword">class</span>.java.name</span><br><span class="line">            <span class="keyword">is</span> <span class="built_in">Long</span> -&gt; <span class="built_in">Long</span>::<span class="keyword">class</span>.java.name</span><br><span class="line">            <span class="keyword">is</span> <span class="built_in">Float</span> -&gt; <span class="built_in">Float</span>::<span class="keyword">class</span>.java.name</span><br><span class="line">            <span class="keyword">is</span> <span class="built_in">Double</span> -&gt; <span class="built_in">Double</span>::<span class="keyword">class</span>.java.name</span><br><span class="line">            <span class="keyword">is</span> String -&gt; String::<span class="keyword">class</span>.java.name</span><br><span class="line">            <span class="keyword">else</span> -&gt; <span class="keyword">throw</span> Exception(<span class="string">&quot;Unknown Type&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果不使用内联的话, 字节码翻译出的java代码是这样: </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String <span class="title function_">running</span><span class="params">(Object x, Function1 funType)</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> (String)funType.invoke(x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(<span class="meta">@NotNull</span> String[] args)</span> &#123;</span><br><span class="line">   <span class="type">double</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">1.13121356456D</span>;</span><br><span class="line">   running(number, (Function1)<span class="literal">null</span>.INSTANCE); <span class="comment">// 创建了一个对象</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果使用内联的话, 代码是这样:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String <span class="title function_">running</span><span class="params">(Object x, Function1 funType)</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> (String)funType.invoke(x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(<span class="meta">@NotNull</span> String[] args)</span> &#123;</span><br><span class="line">   <span class="type">double</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">1.13121356456D</span>;</span><br><span class="line">   <span class="type">Object</span> <span class="variable">x$iv</span> <span class="operator">=</span> number; <span class="comment">// 这是 running 函数的参数</span></span><br><span class="line">   <span class="keyword">if</span> (x$iv <span class="keyword">instanceof</span> Integer) &#123;</span><br><span class="line">      <span class="keyword">return</span> Integer.TYPE.getName();</span><br><span class="line">   &#125; <span class="keyword">else</span> <span class="keyword">if</span> (x$iv <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line">      <span class="keyword">return</span> String.class.getName();</span><br><span class="line">   &#125; <span class="keyword">else</span> <span class="keyword">if</span> (x$iv <span class="keyword">instanceof</span> Long) &#123;</span><br><span class="line">      <span class="keyword">return</span> Long.TYPE.getName();</span><br><span class="line">   &#125; <span class="keyword">else</span> <span class="keyword">if</span> (x$iv <span class="keyword">instanceof</span> Float) &#123;</span><br><span class="line">      <span class="keyword">return</span> Float.TYPE.getName();</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> Double.TYPE.getName();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>为什么需要函数内联?</li>
</ul>
<p>① 在未使用函数内联的情况下, kotlin的匿名函数(lambda)通常和java一样, 需要创建一个对象, 每遇到匿名函数就需要创建一个新的对象, 导致性能损耗, 但如果使用函数内联, 编译器会在任何需要匿名函数的地方, 直接拷贝函数体的源码过去, 不需要创建对象了</p>
<p>② 泛型的实化</p>
<blockquote>
<p>lambda的递归函数无法内联, 会导致编译器无限复制粘贴函数体</p>
</blockquote>
<h3 id="函数引用"><a href="#函数引用" class="headerlink" title="函数引用"></a>函数引用</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">inline</span> <span class="function"><span class="keyword">fun</span> <span class="title">running</span><span class="params">(x: <span class="type">Int</span>, y: <span class="type">Int</span>, myFunction: (<span class="type">Int</span>, <span class="type">Int</span>) -&gt; <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">    println(<span class="string">&quot;x: <span class="variable">$x</span>, y: <span class="variable">$y</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> myFunction.invoke(x, y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">max</span><span class="params">(x: <span class="type">Int</span>, y: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> = <span class="keyword">if</span> (x &gt; y) x <span class="keyword">else</span> y</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> x = <span class="number">10</span></span><br><span class="line">    <span class="keyword">val</span> y = <span class="number">20</span></span><br><span class="line">    println(running(x, y, ::max)) <span class="comment">// ★</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="函数类型作为返回值"><a href="#函数类型作为返回值" class="headerlink" title="函数类型作为返回值"></a>函数类型作为返回值</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">running</span><span class="params">()</span></span>: (<span class="built_in">Int</span>, <span class="built_in">Int</span>) -&gt; String &#123;</span><br><span class="line">    <span class="keyword">val</span> prefix: String = <span class="string">&quot;计算: &quot;</span></span><br><span class="line">    <span class="keyword">val</span> postfix: String = <span class="string">&quot;计算结果为: &quot;</span></span><br><span class="line">    <span class="keyword">return</span> &#123;x:<span class="built_in">Int</span>, y: <span class="built_in">Int</span> -&gt;</span><br><span class="line">        <span class="string">&quot;<span class="subst">$&#123;prefix&#125;</span><span class="subst">$&#123;x&#125;</span> + <span class="variable">$y</span> <span class="subst">$&#123;postfix&#125;</span><span class="subst">$&#123;x + y&#125;</span>&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> function = running()</span><br><span class="line">    println(function(<span class="number">1</span>, <span class="number">6</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><ul>
<li>什么是闭包?</li>
</ul>
<p>MDN对闭包的说明很到位:</p>
<p><code>A closure is the combination of a function bundled together (enclosed) with references to its surrounding state (the lexical environment).</code></p>
<p><strong>闭包是一个函数与引用该函数周围作用域变量绑定在一起的组合</strong></p>
<p><code>In other words, a closure gives you access to an outer function&#39;s scope from an inner function. In JavaScript, closures are created every time a function is created, at function creation time.</code></p>
<p><strong>换句话说, 闭包给了你从一个内部函数访问外部函数作用域的能力, 在 JavaScript 中, 每次创建一个函数都会在函数创建时创建闭包</strong></p>
<blockquote>
<p>除了 JavaScript 那段, 闭包概念应该算通用的</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures#emulating_private_methods_with_closures">Closures - JavaScript | MDN (mozilla.org)</a></p>
<ul>
<li>闭包的作用</li>
</ul>
<p>闭包给予了作用域保护, 防止作用域出现相同函数名冲突. 像c++提出的namespace一样, kotlin存在顶层函数和属性, 如果不做作用域保护, 随着项目变大, 将有一堆函数重名</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">running</span><span class="params">()</span></span>: (<span class="built_in">Int</span>, <span class="built_in">Int</span>) -&gt; String &#123;</span><br><span class="line">    <span class="keyword">val</span> prefix: String = <span class="string">&quot;计算: &quot;</span></span><br><span class="line">    <span class="keyword">val</span> postfix: String = <span class="string">&quot;计算结果为: &quot;</span></span><br><span class="line">    <span class="keyword">return</span> &#123;x:<span class="built_in">Int</span>, y: <span class="built_in">Int</span> -&gt;</span><br><span class="line">        <span class="string">&quot;<span class="subst">$&#123;prefix&#125;</span><span class="subst">$&#123;x&#125;</span> + <span class="variable">$y</span> <span class="subst">$&#123;postfix&#125;</span><span class="subst">$&#123;x + y&#125;</span>&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p><code>val/var 变量名: 变量类型</code></p>
<blockquote>
<p><code>val</code> 是 <code>java</code> 中的 <code>final</code> 变量</p>
<p>这句话错了, 也没错. kotlin 的 <code>val</code> 强调只读性，也就是只有 <code>getter</code>构造器而没有 <code>setter</code> 构造器, 不强调是不是 <code>final</code> 因为 <code>final</code> 是 kotlin 自带的, 任何类、变量和函数不经强调默认都是 <code>final</code></p>
</blockquote>
<p>kotlin编译器只生成 <code>get</code> 函数</p>
<p><code>var</code> 则是可读写的属性, kotlin编译器会生成 <code>get/set</code> 函数</p>
<p>在<code>val v: Int</code>变量 <code>v</code> 声明时, 如果没有进行初始化, 则变量 <code>v</code> 需要在后续中初始化一次</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果是声明时, 需要确定类型</span></span><br><span class="line"><span class="keyword">val</span> v: <span class="built_in">Int</span></span><br><span class="line">v = <span class="number">10</span></span><br></pre></td></tr></table></figure>

<p><code>var</code> 定义的变量, 一旦初始化了类型, 下次赋值时该变量的类型不变</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> v = <span class="number">10</span></span><br><span class="line">v = <span class="string">&quot;hello&quot;</span> <span class="comment">// 错误, v的类型已经是 Int 了, 不可能再变成 String</span></span><br></pre></td></tr></table></figure>

<h2 id="和-的区别"><a href="#和-的区别" class="headerlink" title="== 和 ===的区别"></a><code>==</code> 和 <code>===</code>的区别</h2><p>在java 中 <code>==</code> 表示引用比较, <code>equals</code> 比较的是对象内容</p>
<p>在 kotlin 中 <code>==</code> 比较的是对象的内容, <code>===</code> 比较的是引用</p>
<blockquote>
<p><code>===</code> 是不可以进行操作符重载的</p>
</blockquote>
<h2 id="字符串格式化模板"><a href="#字符串格式化模板" class="headerlink" title="字符串格式化模板"></a>字符串格式化模板</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> a: <span class="built_in">Int</span> = <span class="number">99</span>;</span><br><span class="line">   <span class="keyword">var</span> b = <span class="number">11</span>; <span class="comment">// 类型推导 为 Int</span></span><br><span class="line">   println(<span class="string">&quot;a = <span class="variable">$a</span>, b = <span class="variable">$b</span>, a + b = <span class="subst">$&#123;a + b&#125;</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面这段代码是kotlin字符串模板的使用方式</p>
<ol>
<li><code>$变量</code> 直接输出变量的值</li>
<li><code>$&#123;表达式&#125;</code> 在花括号内可以写上表达式</li>
</ol>
<p>上面那段字符串操作模板被反编译成java代码时就会变成</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">StringDemo01Kt</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(<span class="meta">@NotNull</span> String[] args)</span> &#123;</span><br><span class="line">      Intrinsics.checkNotNullParameter(args, <span class="string">&quot;args&quot;</span>);</span><br><span class="line">      <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">99</span>;</span><br><span class="line">      <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">11</span>;</span><br><span class="line">      <span class="type">String</span> <span class="variable">var3</span> <span class="operator">=</span> <span class="string">&quot;a = &quot;</span> + a + <span class="string">&quot;, b = &quot;</span> + b + <span class="string">&quot;, a + b = &quot;</span> + (a + b);</span><br><span class="line">      System.out.println(var3);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>看亮点:<br><code>String var3 = &quot;a = &quot; + a + &quot;, b = &quot; + b + &quot;, a + b = &quot; + (a + b);</code></p>
<h2 id="类和属性"><a href="#类和属性" class="headerlink" title="类和属性"></a>类和属性</h2><blockquote>
<p>这个将会在后续章节中着重讲解</p>
</blockquote>
<h3 id="类"><a href="#类" class="headerlink" title="类"></a>类</h3><p>在java中类被写成这样的形式:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.age;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用 idea 的java 转 kotlin 代码的转换器转换成 kotlin 源码后: </p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>(<span class="keyword">var</span> name: String, <span class="keyword">var</span> age: <span class="built_in">Int</span>)</span><br></pre></td></tr></table></figure>

<p>看起来舒服多了</p>
<blockquote>
<p>在<code>java</code>转化成<code>kotlin</code>后, <code>public</code> 被隐藏, 在<code>kotlin</code>中类是默认<code>public</code>, 而在<code>java</code>中默认是 <code>default</code> (<code>public default protected private</code>)</p>
</blockquote>
<blockquote>
<p>ps: 在作为类的成员字段, 也是属性所以需要显示的使用 <code>val/var</code> 来确定属性的 <code>set/get</code> 方法<code>class Person(var name: String, var age: Int)</code>而函数参数不需要 val&#x2F;var <code>fun sum(a: Int, b: Int)</code>可能是因为它不用 <code>get/set</code> 方法. 不过可变参数需要主动声明 <code>vararg</code>, 例如: <code>ListOf&lt;String&gt;(vararg arr: String)</code></p>
</blockquote>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><table>
<thead>
<tr>
<th>属性和字段的区别</th>
</tr>
</thead>
<tbody><tr>
<td>在java中<code>private String name</code> 是<strong>成员字段</strong>需要另外加上 <code>get/set</code> 方法成为属性</td>
</tr>
<tr>
<td>在kotlin <code>val/var</code> 声明变量时, 如果使用 <code>val</code> 定义变量, 将被标记成只读属性, 仅生成 <code>get</code> 方法, 不生成<code>set</code>方法, 如果使用的 <code>var</code> 定义变量, 则生成 <code>set/get</code> 方法</td>
</tr>
</tbody></table>
<ul>
<li>自定义属性访问器</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span>(<span class="keyword">val</span> height: <span class="built_in">Int</span>, <span class="keyword">val</span> width: <span class="built_in">Int</span>) &#123;</span><br><span class="line">   <span class="keyword">val</span> isSquare: <span class="built_in">Boolean</span></span><br><span class="line"><span class="comment">//    get() &#123;</span></span><br><span class="line"><span class="comment">//       return height == width</span></span><br><span class="line"><span class="comment">//    &#125; // 普通函数体形式</span></span><br><span class="line"><span class="comment">// get() &#123;height == width&#125; // lamdba形式</span></span><br><span class="line">   <span class="keyword">get</span>() = height == width <span class="comment">// 表达式函数体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>当遇到 <code>kotlin</code> 属性 <code>var isDelete</code> 时, <code>kotlin</code>会生成 <code>isDelete</code> 方法和 <code>setDelete</code> 方法</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8ad13392ed6a432ca845dd4059291a27~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<h2 id="kotlin中的import关键字"><a href="#kotlin中的import关键字" class="headerlink" title="kotlin中的import关键字"></a>kotlin中的<code>import</code>关键字</h2><p>import关键字在kotlin中可以导入类和顶层函数(在java中叫静态函数)</p>
<p>在 kotlin 中写一个扩展函数(就是把this当作参数传递进去的函数)</p>
<blockquote>
<p>注意 this 当作参数的话, 将会被认为是 value-parameter 类型</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> String.<span class="title">lasts</span><span class="params">()</span></span>: <span class="built_in">Char</span> = <span class="keyword">this</span>[<span class="keyword">this</span>.length - <span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<p>而在 kotlin中使用 扩展函数 的方法, <code>val ch = &quot;kotlin&quot;.lasts()</code></p>
<p>在 java 中写成这样:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 核心代码在这里, 把 调用 lasts 对象当作参数传递进去了, 这步骤由 kotlin 虚拟机完成</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Char <span class="title function_">lasts</span><span class="params">(String <span class="built_in">this</span> <span class="comment">/* 这个 this就是调用这个方法的对象, 就是前面例子的 &quot;kotlin&quot; */</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// &quot;kotlin&quot;.charAt(&quot;kotlin&quot;.length() - 1) 类似于这样</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.charAt(<span class="built_in">this</span>.length() - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p> 先提出一些后面的知识点, 之后还能回头来看看</p>
</blockquote>
<p>回到正题, 我们在另一个包里调用 <code>lasts</code> 顶层函数(静态函数), 就会在kotlin上面见到</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base.func.lastChar</span><br></pre></td></tr></table></figure>

<p>前面的 <code>base.func</code> 是包名, 而 <code>lastChar</code> 是方法</p>
<p>如果要在另一个包的java中调用, 就变成了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base.func.ExtensionFuncKt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExtensionDemo01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(ExtensionFuncKt.lastChar(<span class="string">&quot;zhazha&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="枚举类"><a href="#枚举类" class="headerlink" title="枚举类"></a>枚举类</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="keyword">class</span> <span class="title class_">Color</span>(<span class="keyword">val</span> r: <span class="built_in">Int</span>, <span class="keyword">val</span> g: <span class="built_in">Int</span>, <span class="keyword">val</span> b: <span class="built_in">Int</span>) &#123;</span><br><span class="line">   RED(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>), ORANGE(<span class="number">255</span>, <span class="number">165</span>, <span class="number">0</span>), YELLOW(<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>), GREEN(<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), BLUE(</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      <span class="number">255</span></span><br><span class="line">   ),</span><br><span class="line">   INDIGO(<span class="number">75</span>, <span class="number">0</span>, <span class="number">130</span>), VIOLET(<span class="number">238</span>, <span class="number">130</span>, <span class="number">238</span>);</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">fun</span> <span class="title">rgb</span><span class="params">()</span></span> = (r * <span class="number">256</span> + g) * <span class="number">256</span> + b</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">fun</span> <span class="title">getWarmth</span><span class="params">()</span></span> = <span class="keyword">when</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">      RED, ORANGE, YELLOW -&gt; <span class="string">&quot;warm&quot;</span></span><br><span class="line">      GREEN -&gt; <span class="string">&quot;neutral&quot;</span></span><br><span class="line">      BLUE, INDIGO, VIOLET -&gt; <span class="string">&quot;cold&quot;</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>需要注意, 如果枚举类中存在额外的方法或者属性定义, 需要使用 <code>;</code> 进行隔离</p>
<blockquote>
<p>早期的枚举没有逗号和分号, 但定义枚举值比较麻烦, 需要这样:</p>
<p><code>RED: Color(255, 0, 0)</code> <code>ORANGE: Color(255, 165, 0)</code>这样相当的麻烦, 还有很多多余的调用, 比较理想的方式就像我们上面那种<code>RED(255, 0, 0)</code>然而带来了新的问题, 无法区分枚举值和类方法, 几经周转(加注解或者添加新关键字等等)他们没办法只能使用 <code>;</code> 来区分</p>
</blockquote>
<p>借助枚举类学习 <code>when</code> 表达式的使用方法</p>
<h2 id="when-表达式"><a href="#when-表达式" class="headerlink" title="when 表达式"></a>when 表达式</h2><p>(1) 使用函数表达式体的形式</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">getWarmth</span><span class="params">()</span></span> = <span class="keyword">when</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">   RED, ORANGE, YELLOW -&gt; <span class="string">&quot;warm&quot;</span></span><br><span class="line">   GREEN -&gt; <span class="string">&quot;neutral&quot;</span></span><br><span class="line">   BLUE, INDIGO, VIOLET -&gt; <span class="string">&quot;cold&quot;</span></span><br><span class="line">   <span class="keyword">else</span> -&gt; <span class="string">&quot;&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(2) 函数体形式</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">getWarmth1</span><span class="params">()</span></span>: String &#123;</span><br><span class="line">   <span class="keyword">when</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">      RED, ORANGE, YELLOW -&gt; <span class="keyword">return</span> <span class="string">&quot;warm&quot;</span></span><br><span class="line">      GREEN -&gt; <span class="keyword">return</span> <span class="string">&quot;neutral&quot;</span></span><br><span class="line">      BLUE, INDIGO, VIOLET -&gt; <span class="keyword">return</span> <span class="string">&quot;cold&quot;</span></span><br><span class="line">      <span class="keyword">else</span> -&gt; <span class="string">&quot;&quot;</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>when</code> 不需要 <code>break</code> 他会默认 <code>break</code>, <code>when</code> 的最后还有个 <code>else</code> 相当于 <code>switch</code> 的 <code>default</code> </p>
<p><code>when</code> 的每个分支都有返回值, 最终 <code>when</code> 表达式的返回类型就是所有分支相同的返回类型, 或者公共的父类型.</p>
<p><code>when</code> 的参数可以忽略</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">when</span> &#123;</span><br><span class="line">    sunny -&gt; library()</span><br><span class="line">    <span class="keyword">else</span> -&gt; study()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>左边的 <code>sunny</code> 必须是 <code>Boolean</code> 类型</p>
<p>所以只要满足左边表达式的返回值类型是 <code>Boolean</code> 都可以放到 <code>when</code> 中</p>
<h2 id="智能类型转换和is表达式类型隐式转换"><a href="#智能类型转换和is表达式类型隐式转换" class="headerlink" title="智能类型转换和is表达式类型隐式转换"></a>智能类型转换和is表达式类型隐式转换</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Expr</span> &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Num</span>(<span class="keyword">val</span> value: <span class="built_in">Int</span>): Expr</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sum</span>(<span class="keyword">val</span> left: Expr, <span class="keyword">val</span> right: Expr): Expr</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">eval</span><span class="params">(e: <span class="type">Expr</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">   <span class="keyword">if</span> (e <span class="keyword">is</span> Num) &#123;</span><br><span class="line">      <span class="keyword">return</span> e.value</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">is</span> Sum) &#123;</span><br><span class="line">      <span class="keyword">return</span> eval(e.left) + eval(e.right)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">throw</span> IllegalArgumentException(<span class="string">&quot;Unknown expression&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   println(eval(Sum(Num(<span class="number">1</span>), Sum(Num(<span class="number">2</span>), Num(<span class="number">3</span>)))))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>if (e is Num)</code> if判断返回为 true 时, 则变量 <code>e</code> 被智能转化成 <code>Num</code> 类型</p>
<blockquote>
<p>我们还可以使用 <code>when</code> 代替 <code>if</code> 表达式</p>
</blockquote>
<h3 id="使用-is-智能转换类型有前提"><a href="#使用-is-智能转换类型有前提" class="headerlink" title="使用 is 智能转换类型有前提"></a>使用 <code>is</code> 智能转换类型有前提</h3><blockquote>
<p>变量必须是 <code>val</code> 定义的变量, 否则无法智能转换, 只能使用 <code>as表达式</code>显示的转换</p>
</blockquote>
<h2 id="使用-as-强制转换类型"><a href="#使用-as-强制转换类型" class="headerlink" title="使用 as 强制转换类型"></a>使用 as 强制转换类型</h2><p>可以使用 <code>as</code> 强制类型, 如果强转不成, 直接报错.</p>
<p>我们还可以使用 <code>as?</code> , 强转不成, 直接返回 <code>null</code></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">println((sum.left <span class="keyword">as</span> Num).value)</span><br><span class="line"><span class="keyword">val</span> n = e <span class="keyword">as</span> Num</span><br></pre></td></tr></table></figure>



<h2 id="for循环和范围表达式"><a href="#for循环和范围表达式" class="headerlink" title="for循环和范围表达式"></a>for循环和范围表达式</h2><p>在 Java 中我们经常这样:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    System.out.println(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 kotlin 中变成这样:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.10</span>) &#123;</span><br><span class="line">    println(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="范围表达式"><a href="#范围表达式" class="headerlink" title="范围表达式"></a>范围表达式</h3><h4 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h4><p>上面那种情况<code>1..10</code> 在官网上说通过 <code>rangeTo</code> 函数实现, 能够使用这种方式的类型还需要实现<code>java.lang.Conparable</code>接口, 比如 <code>String</code> </p>
<p><code>&quot;a&quot;..&quot;z&quot;</code></p>
<p>就会从 <code>&quot;a&quot;</code> 遍历到 <code>&quot;z&quot;</code></p>
<p><code>for(i in 1..10) print(i)</code> &#x3D;&#x3D;&gt; <code>12345678910</code></p>
<p>1..10 区间表达形式,  <code>[1, 10]</code> 表示之间的数, 包括 1 和 10</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">val</span> interval: IntRange = <span class="number">1.</span><span class="number">.10</span></span><br><span class="line">   <span class="keyword">for</span> (v <span class="keyword">in</span> interval) &#123;</span><br><span class="line">      print(<span class="string">&quot;<span class="variable">$v</span> &quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   println()</span><br><span class="line">   <span class="keyword">for</span> (v <span class="keyword">in</span> interval.last downTo interval.first step <span class="number">1</span>) &#123;</span><br><span class="line">      print(<span class="string">&quot;<span class="variable">$v</span> &quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   println()</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// [1, 10)</span></span><br><span class="line">   <span class="keyword">for</span> (v <span class="keyword">in</span> interval.first until interval.last) &#123;</span><br><span class="line">      print(<span class="string">&quot;<span class="variable">$v</span> &quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">10</span> </span><br><span class="line"><span class="number">10</span> <span class="number">9</span> <span class="number">8</span> <span class="number">7</span> <span class="number">6</span> <span class="number">5</span> <span class="number">4</span> <span class="number">3</span> <span class="number">2</span> <span class="number">1</span> </span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> </span><br></pre></td></tr></table></figure>

<h4 id="步长"><a href="#步长" class="headerlink" title="步长"></a>步长</h4><p><code>kotlin</code>还提供了 <code>step</code> 函数定义迭代的步长</p>
<p><code>for (i in 1..10 step 2) println(i)</code>   &#x3D;&#x3D;&gt; <code>&quot;1359&quot;</code></p>
<h4 id="倒序"><a href="#倒序" class="headerlink" title="倒序"></a>倒序</h4><p>如果需要使用倒序, 则可以使用 <code>downTo</code>方法来实现:</p>
<p><code>for(i in 10 downTo 1 step 2) print(i)</code> &#x3D;&#x3D;&gt; <code>10 8 6 4 2</code></p>
<h4 id="半开区间"><a href="#半开区间" class="headerlink" title="半开区间"></a>半开区间</h4><p>还可以使用 <code>unitl</code> 函数实现 <code>半开区间</code></p>
<p><code>for (i in 1 until 10) &#123; println(i) &#125;</code> &#x3D;&#x3D;&gt; <code>123456789</code></p>
<h4 id="in-检查成员是否存在"><a href="#in-检查成员是否存在" class="headerlink" title="in 检查成员是否存在"></a>in 检查成员是否存在</h4><p><code>&quot;a&quot; in listOf(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)</code> &#x3D;&#x3D;&gt; <code>true</code></p>
<p><code>&quot;kot&quot; in &quot;abc&quot;..&quot;xyz&quot;</code>  &#x3D;&#x3D;&gt; <code>true</code></p>
<p>上面那个等价于下面这个</p>
<p><code>&quot;kot&quot; &gt;= &quot;abc&quot; &amp;&amp; &quot;abc&quot; &lt;= &quot;xyz&quot;</code> &#x3D;&#x3D;&gt; <code>true</code></p>
<h4 id="in-检查成员配合感叹号-取反结果"><a href="#in-检查成员配合感叹号-取反结果" class="headerlink" title="in 检查成员配合感叹号: 取反结果"></a>in 检查成员配合感叹号: 取反结果</h4><p><code>&quot;a&quot; !in listOf(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)</code></p>
<h4 id="for-使用迭代器遍历"><a href="#for-使用迭代器遍历" class="headerlink" title="for 使用迭代器遍历"></a>for 使用迭代器遍历</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(c <span class="keyword">in</span> array) &#123;</span><br><span class="line">    println(c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="withIndex键值组遍历"><a href="#withIndex键值组遍历" class="headerlink" title="withIndex键值组遍历"></a>withIndex键值组遍历</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ((index, value) <span class="keyword">in</span> array.withIndex()) &#123;</span><br><span class="line">    println(<span class="string">&quot;the element at <span class="variable">$index</span>, is <span class="variable">$value</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="迭代map"><a href="#迭代map" class="headerlink" title="迭代map"></a>迭代map</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">val</span> map = mutableMapOf(</span><br><span class="line">      <span class="number">1</span> to <span class="string">&quot;zhazha&quot;</span>,</span><br><span class="line">      <span class="number">2</span> to <span class="string">&quot;haha&quot;</span>,</span><br><span class="line">      <span class="number">3</span> to <span class="string">&quot;haha&quot;</span>,</span><br><span class="line">      Pair(<span class="number">4</span>, <span class="string">&quot;xixi&quot;</span>),</span><br><span class="line">      Pair&lt;<span class="built_in">Int</span>, String&gt;(<span class="number">5</span>, <span class="string">&quot;heihei&quot;</span>)</span><br><span class="line">   )</span><br><span class="line">   </span><br><span class="line">   map.forEach(<span class="function"><span class="title">fun</span><span class="params">(m: <span class="type">Map</span>.<span class="type">Entry</span>&lt;<span class="type">Int</span>, String&gt;)</span></span>: <span class="built_in">Unit</span> &#123;</span><br><span class="line">      println(<span class="string">&quot;key = <span class="subst">$&#123;m.key&#125;</span>, value = <span class="subst">$&#123;m.value&#125;</span>&quot;</span>)</span><br><span class="line">   &#125;)</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">for</span> ((key, value) <span class="keyword">in</span> map) &#123;</span><br><span class="line">      println(<span class="string">&quot;key = <span class="variable">$key</span>, value = <span class="variable">$value</span>&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// java forEach??? 调用的 java Map 里面的 BiConsumer 接口</span></span><br><span class="line">   map.forEach &#123; key, value -&gt;</span><br><span class="line">      println(<span class="string">&quot;key = <span class="variable">$key</span>, value = <span class="variable">$value</span>&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// Kotlin forEach??? 调用的 kotlin 的 (key, value) -&gt; &#123;&#125; 遍历 Map 方法</span></span><br><span class="line">   map.forEach &#123; (key, value) -&gt;</span><br><span class="line">      println(<span class="string">&quot;key = <span class="variable">$key</span>, value = <span class="variable">$value</span>&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> Set<span class="type">&lt;String&gt;</span>.<span class="title">inSet</span><span class="params">(str: <span class="type">String</span>)</span></span> = str <span class="keyword">in</span> <span class="keyword">this</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> <span class="keyword">set</span> = setOf&lt;String&gt;(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>)</span><br><span class="line"></span><br><span class="line">println(<span class="keyword">set</span>.inSet(<span class="string">&quot;a&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// (ch &gt;= &#x27;a&#x27; &amp;&amp; ch &lt;= &#x27;z&#x27;) || (ch &gt;= &#x27;A&#x27; &amp;&amp; ch &lt;= &#x27;Z&#x27;)</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">isLetter</span><span class="params">(ch: <span class="type">Char</span>)</span></span> = ch <span class="keyword">in</span> <span class="string">&#x27;a&#x27;</span>..<span class="string">&#x27;z&#x27;</span> || ch <span class="keyword">in</span> <span class="string">&#x27;A&#x27;</span>..<span class="string">&#x27;Z&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ch &gt;= &#x27;0&#x27; &amp;&amp; ch &lt;= &#x27;9&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">inNumber</span><span class="params">(ch: <span class="type">Char</span>)</span></span> = ch <span class="keyword">in</span> <span class="string">&#x27;0&#x27;</span>..<span class="string">&#x27;9&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="kotlin-异常"><a href="#kotlin-异常" class="headerlink" title="kotlin 异常"></a>kotlin 异常</h2><p>在kotlin中, 异常可以处理也可以不处理, 也不在函数声明上, 也不用写上<code>throws Exception</code>, 除非需要主动抛出异常, 则需要<code>throw new Exception()</code></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">val</span> bufferedReader = BufferedReader(InputStreamReader(System.`<span class="keyword">in</span>`))</span><br><span class="line">   <span class="keyword">val</span> number = readNumber(bufferedReader)</span><br><span class="line">   println(number)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">readNumber</span><span class="params">(reader: <span class="type">BufferedReader</span>)</span></span>: <span class="built_in">Int</span>? = <span class="keyword">try</span> &#123;</span><br><span class="line">   <span class="keyword">val</span> line = reader.readLine()</span><br><span class="line">   Integer.parseInt(line)</span><br><span class="line">&#125; <span class="keyword">catch</span> (e: NumberFormatException) &#123;</span><br><span class="line">   <span class="keyword">throw</span> e</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">   reader.close()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Bangiao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://bangiao.github.io/2022/12/03/07kotlin/一、kotlin基础语法学习/">https://bangiao.github.io/2022/12/03/07kotlin/一、kotlin基础语法学习/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%BC%82%E5%B8%B8/">异常</a><a class="post-meta__tags" href="/tags/%E5%8C%85/">包</a><a class="post-meta__tags" href="/tags/%E5%87%BD%E6%95%B0/">函数</a><a class="post-meta__tags" href="/tags/%E8%A1%A8%E8%BE%BE%E5%BC%8F/">表达式</a><a class="post-meta__tags" href="/tags/%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%87%BD%E6%95%B0%E4%BD%93/">表达式函数体</a><a class="post-meta__tags" href="/tags/%E5%8F%AF%E5%8F%98%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0/">可变函数参数</a><a class="post-meta__tags" href="/tags/lambda/">lambda</a><a class="post-meta__tags" href="/tags/%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0/">匿名函数</a><a class="post-meta__tags" href="/tags/%E5%87%BD%E6%95%B0%E5%86%85%E6%95%9B/">函数内敛</a><a class="post-meta__tags" href="/tags/%E5%87%BD%E6%95%B0%E5%BC%95%E7%94%A8/">函数引用</a><a class="post-meta__tags" href="/tags/%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0/">高阶函数</a><a class="post-meta__tags" href="/tags/%E9%97%AD%E5%8C%85/">闭包</a><a class="post-meta__tags" href="/tags/%E5%8F%98%E9%87%8F/">变量</a><a class="post-meta__tags" href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E6%9D%BF/">字符串模板</a><a class="post-meta__tags" href="/tags/%E7%B1%BB/">类</a><a class="post-meta__tags" href="/tags/%E5%B1%9E%E6%80%A7/">属性</a><a class="post-meta__tags" href="/tags/import/">import</a><a class="post-meta__tags" href="/tags/%E6%9E%9A%E4%B8%BE%E7%B1%BB/">枚举类</a><a class="post-meta__tags" href="/tags/when%E8%A1%A8%E8%BE%BE%E5%BC%8F/">when表达式</a><a class="post-meta__tags" href="/tags/%E6%99%BA%E8%83%BD%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/">智能类型转换</a><a class="post-meta__tags" href="/tags/%E9%9A%90%E5%BC%8F%E8%BD%AC%E6%8D%A2/">隐式转换</a><a class="post-meta__tags" href="/tags/for%E5%BE%AA%E7%8E%AF/">for循环</a><a class="post-meta__tags" href="/tags/%E8%8C%83%E5%9B%B4%E8%A1%A8%E8%BE%BE%E5%BC%8F/">范围表达式</a><a class="post-meta__tags" href="/tags/%E9%81%8D%E5%8E%86/">遍历</a><a class="post-meta__tags" href="/tags/%E6%AD%A5%E9%95%BF/">步长</a><a class="post-meta__tags" href="/tags/%E5%80%92%E5%8F%99/">倒叙</a><a class="post-meta__tags" href="/tags/%E5%8D%8A%E5%BC%80%E5%8C%BA%E9%97%B4/">半开区间</a><a class="post-meta__tags" href="/tags/in/">in</a><a class="post-meta__tags" href="/tags/%E5%8F%96%E5%8F%8D/">取反</a><a class="post-meta__tags" href="/tags/%E8%BF%AD%E4%BB%A3/">迭代</a><a class="post-meta__tags" href="/tags/map/">map</a></div><div class="social-share pull-right" data-disabled="google,facebook"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script><nav id="pagination"><div class="prev-post pull-left"><a href="/2022/12/03/07kotlin/%E4%BA%8C%E3%80%81kotlin%E7%9A%84%E5%87%BD%E6%95%B0/"><i class="fa fa-chevron-left">  </i><span>二、kotlin的函数</span></a></div><div class="next-post pull-right"><a href="/2022/11/29/02springcloud/26SpringSecurity-%E6%9D%83%E9%99%90%E6%A8%A1%E5%9E%8B/"><span>26SpringSecurity-权限模型</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2014 - 2022 By Bangiao</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">这是博客github仓库地址：<a target="_blank" rel="noopener" href="https://github.com/bangiao/bangiao.github.io">bangiao.github.io</a>，欢迎访问!</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/lib/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.1"></script><script src="/js/fancybox.js?version=1.9.1"></script><script src="/js/sidebar.js?version=1.9.1"></script><script src="/js/copy.js?version=1.9.1"></script><script src="/js/fireworks.js?version=1.9.1"></script><script src="/js/transition.js?version=1.9.1"></script><script src="/js/scroll.js?version=1.9.1"></script><script src="/js/head.js?version=1.9.1"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>